---
tags:
  - ts
---

# 函数 More on Functions

## 函数类型表达式

```ts
function greeter(fn: (a: string) => void) {
  fn("Hello, World");
}
```

## 调用签名

定义一个带属性的函数：

```ts{1-4}
type DescribableFunction = {
  description: string;
  (someArg: number): boolean;   // 注意是 `:` 而不是 `=>`
};

function doSomething(fn: DescribableFunction) {
  console.log(fn.description + " returned " + fn(6));
}
```

## 构造签名

```ts
type SomeConstructor = {
  new (s: string): SomeObject;
};

function fn(ctor: SomeConstructor) {
  return new ctor("hello");
}
```

如果即是构造函数，又是普通函数：

```ts
interface CallOrConstruct {
  new (s: string): Date;
  (n?: number): number;
}
```

## 泛型函数

```ts
// 能自动推断返回值类型为 `Type[]`
function combine<Type>(arr1: Type[], arr2: Type[]): Type[] {
  return arr1.concat(arr2);
}
```

可以进行类型约束：

```ts
function longest<Type extends { length: number }>(
  a: Type, 
  b: Type
) {
  return a.length >= b.length ? a : b;
}
```

类型约束中，注意返回值类型的标明：

```ts {8}
function minimumLength<Type extends { length: number }>(
  obj: Type,
  minimum: number
): Type {
  if (obj.length >= minimum) {
    return obj;
  } else {
    return { length: minimum } as Type;
  }
}
```

### 如何使用好泛型函数

#### 

## 可选参数

## 函数重载

## 其他需要了解的类型

## 剩余参数

## 参数解构

## 赋值

## 参考

<!-- [ - TypeScript]() -->
